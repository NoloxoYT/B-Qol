plugins {
    id 'java'
    id 'com.gradle.build-scan' version '3.15'
    id 'fabric-loom' version '1.3-SNAPSHOT'
    id 'maven-publish'
}

repositories {
    mavenCentral()
    maven { url 'https://maven.fabricmc.net/' }
}

dependencies {
    minecraft "com.mojang:minecraft:1.20.4"
    mappings "net.fabricmc:yarn:1.20.4+v2:v2"
    modImplementation "net.fabricmc:fabric-loader:0.14.22"
    include(implementation("net.fabricmc.fabric-api:fabric-api:0.86.1+1.20.4"))
}

java {
    toolchain.languageVersion = JavaLanguageVersion.of(17)
}

loom {
    mixin {
        defaultRefmapName = "mixins.bqol.refmap.json"
    }
}

publishing {
    publications {
        maven(MavenPublication) {
            from components.java
        }
    }
    repositories {
        maven {
            name = 'GitHubPackages'
            url = uri('https://maven.pkg.github.com/NoloxoYT/B-Qol')
            credentials {
                username = System.getenv('USERNAME') ?: 'placeholder'
                password = System.getenv('TOKEN') ?: 'placeholder'
            }
        }
    }
}